plugins {
    alias(libs.plugins.android.application)
    alias(libs.plugins.kotlin.android)
    alias(libs.plugins.kotlin.compose)
}

android {
    namespace 'com.pokrikinc.mixpokrikcutter'
    compileSdk 35

    // üöÄ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò –î–õ–Ø JSON –§–ê–ô–õ–û–í
    aaptOptions {
        noCompress 'gz', 'json', 'db', 'txt'  // –î–æ–±–∞–≤–∏–ª–∏ json, db, txt
        cruncherEnabled = false               // –£—Å–∫–æ—Ä—è–µ—Ç —Å–±–æ—Ä–∫—É
    }

    buildFeatures {
        compose = true
        buildConfig = true        // –í–∫–ª—é—á–∏–ª–∏ BuildConfig –¥–ª—è debug –ª–æ–≥–æ–≤
        viewBinding = false       // –û—Ç–∫–ª—é—á–∏–ª–∏ –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
        dataBinding = false       // –û—Ç–∫–ª—é—á–∏–ª–∏ –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
    }

    // üöÄ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò COMPOSE
    composeOptions {
        kotlinCompilerExtensionVersion = '1.5.8'
    }

    defaultConfig {
        applicationId "com.pokrikinc.mixpokrikcutter"
        minSdk 25
        targetSdk 35
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"

        // üöÄ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò –î–õ–Ø –ë–û–õ–¨–®–ò–• JSON –§–ê–ô–õ–û–í
        vectorDrawables {
            useSupportLibrary = true
        }

        // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º heap –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö JSON
        multiDexEnabled = true

        // –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è ARM –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä
        ndk {
            abiFilters 'arm64-v8a', 'armeabi-v7a', "x86_64"
        }
    }

    buildTypes {
        debug {
            minifyEnabled = false
            debuggable = true
            applicationIdSuffix = ".debug"
            // üöÄ –£–°–ö–û–†–ï–ù–ò–ï DEBUG –°–ë–û–†–ö–ò
            crunchPngs = false
            zipAlignEnabled = false

            // –û—Ç–∫–ª—é—á–∞–µ–º –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏
            renderscriptOptimLevel = 0
        }

        release {
            minifyEnabled = true
            shrinkResources = true
            debuggable = false
            // üöÄ –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–´–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò RELEASE
            crunchPngs = true
            zipAlignEnabled = true

            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'

            // R8 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
            renderscriptOptimLevel = 3
        }
    }

    // üöÄ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò –ö–û–ú–ü–ò–õ–Ø–¶–ò–ò
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_11
        targetCompatibility = JavaVersion.VERSION_11

        // –í–∫–ª—é—á–∞–µ–º –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—É—é –∫–æ–º–ø–∏–ª—è—Ü–∏—é
        incremental = true
    }

    kotlinOptions {
        jvmTarget = '11'
    }

    lintOptions {
        checkReleaseBuilds = false
        abortOnError = false
        disable 'InvalidPackage', 'OldTargetApi'
    }
}

dependencies {
    implementation libs.android.serialport
    implementation libs.coil.svg
    implementation libs.coil.network.okhttp
    implementation libs.coil.network.ktor3
    implementation libs.coil.compose
    implementation libs.androidx.ui
    implementation libs.retrofit
    implementation libs.retrofit2.converter.gson
    implementation libs.androidx.navigation.compose
    implementation libs.androidx.material3
    implementation libs.androidx.activity.compose
    implementation libs.androidx.lifecycle.viewmodel.compose
    implementation libs.androidx.core.ktx
    implementation libs.androidx.appcompat
    implementation libs.material
    implementation libs.androidx.activity
    implementation libs.androidx.constraintlayout
}